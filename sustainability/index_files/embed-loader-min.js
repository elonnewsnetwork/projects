Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null===this||this===undefined)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return-1;var a=+e||0;if(Math.abs(a)===Infinity&&(a=0),a>=r)return-1;for(i=Math.max(a>=0?a:r-Math.abs(a),0);i<r;){if(i in n&&n[i]===t)return i;i++}return-1}),function(t,e,i){var n,r,a,s,o=["https://infogr.am","https://e.infogr.am","https://infogram.com","https://e.infogram.com"],h=t.getComputedStyle||function(t){return t.currentStyle},c=(n=[],r=[],a=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);var i,n=-1;for(i=0;i<t.length;i++)if(this[i]===e){n=i;break}return n},s=function(t,e){return-1!==a(t,e)},{add:function(t,e){s(n,t)||s(r,e)||(n.push(t),r.push(e))},contains:function(t){return s(n,t)},id:function(t){var e=a(n,t);return e>=0?r[e]:null}});function f(t){if(t.parentNode){var e=(n=t,Array.prototype.indexOf.call(n.parentNode.childNodes,n)),i=f(t.parentNode);return i.push(e),i}var n;return[]}function l(t){return!(t.left===t.right&&t.top===t.bottom&&t.right===t.top&&0===t.top)}function d(t,e){this.queue=t||[],this.processing=0,this.origin=e,this.infographics={},this.legacyList=[],this.addIframesListener(),this.addScrollListener(),this.initWatcher(),this.handleResizeEvent()}var u=d.prototype;function p(){var i,n=[];if(e.querySelectorAll)i=e.querySelectorAll(".infogram-embed");else if(e.getElementsByClassName)i=e.getElementsByClassName("infogram-embed");else{i=[];for(var r=e.getElementsByTagName("div"),a=r.length,s=0;s<a;s++){var o=r[s];o.className&&-1!==o.className.indexOf("infogram-embed")&&i.push(o)}}for(var h=i.length,c=0;c<h;c++){var f=i[c];if(!f.getAttribute("data-processed")){var l=f.getAttribute("data-id"),d=f.getAttribute("data-type"),u=f.getAttribute("data-title"),p=f.getAttribute("data-extra")||"",g=t.getComputedStyle(f);"0px"==g.getPropertyValue("height")&&"0px"==g.getPropertyValue("min-height")&&f.style.setProperty("min-height","1px"),f.setAttribute("data-processed",1),n.push({container:f,extra:p,id:l,title:u,type:d,activated:!1,frameReady:!1})}}return n}function g(t){if(e.contains)return e.contains(t);for(var i=e.documentElement;t;){if(t===i)return!0;t=t.parentNode}return!1}function m(e,i,n,r){e.addEventListener?e.addEventListener(i,n,!!r&&{passive:!0}):e.attachEvent?e.attachEvent("on"+i,function(){return n.call(e,t.event)}):e["on"+i]=n}if(u.addIframesListener=function(){m(t,"message",this.handleMessageEvent.bind(this))},u.addScrollListener=function(){m(t,"scroll",this.handleScrollEvent.bind(this),!0),m(t,"resize",this.handleResizeEvent.bind(this))},u.handleResizeEvent=function(){this.vWidth=t.innerWidth||e.documentElement.clientWidth,this.vHeight=t.innerHeight||e.documentElement.clientHeight,this.handleScrollEvent()},u.checkVisible=function(){var t;for(t in this.infographics)if(this.infographics.hasOwnProperty(t)){var e=this.infographics[t];if(!e.activated&&e.frameReady){var i=this.isElementVisible(e.iframe());i&&(this.sendToIframe(t,"visibleRegion:"+JSON.stringify(i)),e.activated=!0)}}this.sortQueue();var n=[];this.queue.forEach(function(t){this.isElementVisible(t.container)&&!t.viewed&&(t.viewed=!0,n.push(t))}.bind(this)),n.forEach(function(t){this.processInfographic(t)}.bind(this))},u.handleScrollEvent=function(){this.scrollBuffer||(this.scrollBuffer=requestAnimationFrame(function(){this.checkVisible(),this.scrollBuffer=null}.bind(this)))},u.handleMessageEvent=function(t){if(this.origin!==t.origin){var e=/^https?:\/\//,i="https://",n=this.origin.replace(e,i),r=t.origin.replace(e,i);if(r!==n&&-1===o.indexOf(r))return;-1===this.origin.indexOf(i)&&0===t.origin.indexOf(i)&&(this.origin=n)}var a=t.source;if(!c.contains(a))for(var s in this.infographics)if(this.infographics.hasOwnProperty(s)&&this.infographics[s].iframe().contentWindow===a){c.add(a,s);break}var h=c.id(a);h&&h in this.infographics&&this.handleIframeEvent(h,t.data)},u.handleIframeEvent=function(t,e){if("string"==typeof e){if("frameReady"===e)return this.infographics[t].frameReady=!0,void this.handleScrollEvent();var i,n=e.split(":").shift(),r=this.infographics[t];if(/^iframeLoaded/.test(n))this.handleResizeEvent(),this.processing--,this.sendToIframe(t,"iframeWidth:"+r.containerWidth),0===this.processing&&this.processOne();else if(/^iframeHeight/.test(n)){i=r.iframe();var a=e.substr(n.length+1).replace(/^\s+|\s+$/g,""),s=a+"px";i.style.height!==s&&(i.style.height=s,r.iframeHeight=a,this.fixForGannett(r))}}},u.fixForGannett=function(t){var e=t.container.parentNode;if(e&&e.parentNode){var i=e.parentNode;if(i&&i.className&&-1!==i.className.indexOf("oembed-infogram")){var n=t.containerWidth,r=t.iframeHeight||t.iframe.style.height;i.setAttribute("data-width",n),i.setAttribute("data-height",r),$&&$.data&&($(i).data("width",n),$(i).data("height",r))}}},u.sendToIframe=function(t,e){var i=this.infographics[t];i&&i.iframe()&&i.iframe().contentWindow.postMessage(e,this.origin)},u.isElementVisible=function(t){if(!t)return!1;var e=t.getBoundingClientRect();if(e.right<0||e.bottom<0||e.left>this.vWidth||e.top>this.vHeight)return!1;if(0===e.width&&0===e.height&&0===e.left&&0===e.top)return!1;var i=Math.min(this.vWidth-e.left,e.width),n=Math.min(this.vHeight-e.top,e.height),r=-1*Math.min(e.left,-0);return{top:-1*Math.min(e.top,-0),left:r,width:i,height:n}},u.initWatcher=function(){setInterval(function(){var t;for(t in this.infographics)if(this.infographics.hasOwnProperty(t)){var i,n=this.infographics[t];if(n.container&&g(n.container))i=n.container;else{if(!(i=e.getElementById(t))){delete this.infographics[t];continue}n.container=i}var r=i.offsetWidth;if(r&&n.containerWidth!==r){n.containerWidth=r;var a=h(i),s=this.getHorizBorders(a)+this.getHorizPaddings(a),o=parseInt(r,10)-s;n.iframe&&(n.iframe().style.width=o+"px",this.sendToIframe(t,"iframeWidth:"+o))}}this.legacyList&&this.legacyList.length&&(this.queue=this.legacyList.slice(0),this.legacyList.length=0,this.processQueue())}.bind(this),200)},u.getHorizBorders=function(t){return parseInt(t.getPropertyValue("border-left-width")||0,10)+parseInt(t.getPropertyValue("border-right-width")||0,10)},u.getHorizPaddings=function(t){return parseInt(t.getPropertyValue("padding-left")||0,10)+parseInt(t.getPropertyValue("padding-right")||0,10)},u.add=function(t,e,i,n,r){this.queue.push({id:t,title:n,container:e,type:i,extra:r}),0===this.processing&&this.processQueue()},u.processInfographic=function(t){var e=this.queue.indexOf(t);if(!(e<0)){this.queue.splice(e,1);var i=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return"ig-"+t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}();t.id=t.id.replace("infogram_0_","").replace(/(http(s?):\/\/infogr(\.am|am\.com)\/)/,"").replace(/\s/g,""),t.container.id=i,t.containerWidth=parseInt(t.container.offsetWidth,10);var n,r=this.createIframe(t.id,t.title||"",t.type,t.containerWidth,t.extra);t.iframe=(n=t,function(){return n.container.getElementsByTagName("iframe")[0]}),t.container.appendChild(r),this.infographics[i]=t,this.processing++}},u.sortQueue=function(){this.queue.sort(function(t,e){return function(t,e){var i=t.getBoundingClientRect(),n=e.getBoundingClientRect(),r=l(i);if(r!=l(n))return r?-1:1;var a=Math.abs(i.top)-Math.abs(n.top);if(0!=a)return a;for(var s=0,o=f(t),h=f(e);s<o.length&&s<h.length&&o[s]===h[s];)s++;return s<o.length&&s<h.length?o[s]-h[s]:0}(t.container,e.container)})},u.processOne=function(){0!==this.queue.length&&(this.sortQueue(),this.processInfographic(this.queue[0]))},u.processQueue=function(){for(;this.queue.length>0;)this.processOne()},u.createIframe=function(t,i,n,r,a){var s=e.createElement("iframe"),o=this.origin+"/"+t+"?src=embed";"image"===n&&(o+="&type=image"),a&&(o+="&extra="+a),i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;");var h=s.style;return h.border="none",h.width=r+"px",h.height="130px",s.src=o,s.setAttribute("scrolling","no"),s.setAttribute("frameborder","0"),s.setAttribute("allowfullscreen",""),i&&s.setAttribute("title",i),s},u.process=function(){for(var t=p(),e=t.length,i=0;i<e;i++){var n=t[i];this.add(n.id,n.container,n.type,n.title,n.extra)}},!t[i]||!t[i].initialized){var v;v=!!e.getElementById("infogram-async")?e.getElementById("infogram-async").src:t[i].script;var y=p();t[i]&&t[i].list&&t[i].list.length&&Array.prototype.push.apply(y,t[i].list);var b=new d(y,function(i){var n=e.createElement("A");n.href=i;var r=n.port&&80!=n.port&&443!=n.port?":"+n.port:"",a="http:";return n.protocol.length>2?a=n.protocol:t.location.protocol.length>2&&(a=t.location.protocol),a+"//"+n.hostname+r}(v));b.processOne(),t[i]={add:b.add.bind(b),process:b.process.bind(b),list:b.legacyList,initialized:!0}}}(window,document,"InfogramEmbeds");